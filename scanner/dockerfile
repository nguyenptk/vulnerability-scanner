FROM golang:1.18-alpine

WORKDIR /app

COPY go.mod .
COPY go.sum .
RUN go mod download

COPY cmd/scanner ./cmd/scanner
COPY common ./common
COPY pb ./pb
COPY server ./server
COPY storages ./storages
COPY tests ./tests

RUN cd ./cmd/scanner; go build 

EXPOSE 8090

CMD [ "./cmd/scanner/scanner" ]